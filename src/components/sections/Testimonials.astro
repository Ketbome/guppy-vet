---
import TestimonialCard from '../ui/TestimonialCard.astro';

// Array de testimonios reales de Google Reviews
const testimonials = [
	{
		id: 1,
		name: "Diego Latorre",
		role: "Hace 3 meses",
		avatar: "/diego.png",
		stars: 5,
		text: "Los encontr√© por Google maps, as√≠ que agradecido. Muy amables y profesionales, atendieron super bien a mi perrita. Todo bien explicado y adem√°s bastante higi√©nicos. Est√° a 1 cuadra de metro macul. Seguiremos con los controles! üí™üèæüçÄ",
		featured: true
	},
	{
		id: 2,
		name: "Valeria Mu√±oz",
		role: "Hace 1 a√±o",
		avatar: "/valeria.png",
		stars: 5,
		text: "Muy buena atenci√≥n, atiendo a mis dos perritas ah√≠, con sus vacunas y ahora √∫ltimo le realizaron un destartraje a una de ellas y qued√≥ impecable, son muy profesionales, el veterinario se toma todo el tiempo necesario para realizar una revisi√≥n de calidad, recomiendo esta veterinaria 100%",
		featured: true
	},
	{
		id: 3,
		name: "Constanza Soto",
		role: "Hace 7 meses",
		avatar: "/coni.png",
		stars: 5,
		text: "Lleve a mi perrita, que estaba intoxicada, el veterinario super atento, la atenci√≥n excelente y de confianza, mi perrita logro recuperarse gracias a la atenci√≥n del veterinario, Recomendado!",
		featured: true
	}
];

// Obtener testimonios destacados y adicionales
const featuredTestimonials = testimonials.filter(t => t.featured);

// Estad√≠sticas reales de Google
const googleStats = {
	rating: 4.8,
	totalReviews: 18,
	fiveStars: 17,
	oneStar: 1
};
---

<section class="testimonials">
	<div class="container">
		<div class="section-header">
			<span class="section-subtitle">Testimonios</span>
			<h2 class="section-title">Lo que dicen nuestros clientes</h2>
			<div class="google-reviews-badge">
				<div class="google-badge">
					<i class="fab fa-google"></i>
					<div class="google-rating">
						<div class="stars">
							{Array.from({length: 5}, (_, i) => (
								<i class="fas fa-star"></i>
							))}
						</div>
						<span class="rating-text">{googleStats.rating} de 5 ‚Ä¢ {googleStats.totalReviews} rese√±as en Google</span>
					</div>
				</div>
			</div>
		</div>
		
		<div class="testimonials__grid" id="testimonials-grid">
			{featuredTestimonials.map((testimonial) => (
				<TestimonialCard
					name={testimonial.name}
					role={testimonial.role}
					avatar={testimonial.avatar}
					stars={testimonial.stars}
					text={testimonial.text}
					isGoogleReview={true}
				/>
			))}
		</div>

		<!-- Bot√≥n para dejar rese√±a -->
		<div class="review-cta">
			<div class="review-cta__content">
				<div class="review-cta__text">
					<h3>¬øHas visitado nuestra cl√≠nica?</h3>
					<p>Comparte tu experiencia y ayuda a otros due√±os de mascotas</p>
				</div>
				<a href="https://www.google.com/maps/place/Clinica+Veterinaria+Guppyvet/@-33.5065112,-70.5960304,17z/data=!3m1!4b1!4m6!3m5!1s0x9662d191aab60e43:0xdf0ae25500ab60af!8m2!3d-33.5065113!4d-70.5911595!16s%2Fg%2F11tw_x7prp?entry=ttu&g_ep=EgoyMDI1MDkwMi4wIKXMDSoASAFQAw%3D%3D" 
				   target="_blank" class="btn btn--primary review-btn">
					<i class="fas fa-star"></i>
					Dejar una rese√±a en Google
				</a>
			</div>
		</div>
	</div>
</section>

<style>
	/* Testimonials Section */
	.testimonials {
		padding: 6rem 0;
		background: linear-gradient(135deg, #f8fdfc 0%, #ffffff 100%);
	}

	.google-reviews-badge {
		display: flex;
		justify-content: center;
		margin-bottom: 3rem;
	}

	.google-badge {
		background: white;
		padding: 1rem 2rem;
		border-radius: 50px;
		box-shadow: var(--shadow-medium);
		display: flex;
		align-items: center;
		gap: 1rem;
		border: 1px solid #e5e7eb;
	}

	.google-badge i {
		font-size: 1.5rem;
		color: #4285f4;
	}

	.google-rating {
		display: flex;
		flex-direction: column;
		gap: 0.25rem;
	}

	.stars {
		display: flex;
		gap: 0.25rem;
	}

	.stars i {
		color: #fbbf24;
		font-size: 1rem;
	}

	.rating-text {
		color: var(--text-light);
		font-size: 0.875rem;
		font-weight: 500;
	}

	.testimonials__grid {
		display: grid;
		grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
		gap: 2rem;
	}

	/* Testimonials Controls */
	.testimonials__controls {
		display: flex;
		justify-content: center;
		margin: 3rem 0;
		gap: 1rem;
	}

	.btn-show-more,
	.btn-show-less {
		background: linear-gradient(135deg, var(--primary-color), var(--accent-color));
		color: white;
		border: none;
		padding: 0.75rem 1.5rem;
		border-radius: 25px;
		font-weight: 600;
		cursor: pointer;
		transition: all 0.3s ease;
		display: flex;
		align-items: center;
		gap: 0.5rem;
		box-shadow: var(--shadow-light);
	}

	.btn-show-more:hover,
	.btn-show-less:hover {
		transform: translateY(-2px);
		box-shadow: var(--shadow-medium);
	}

	/* Review CTA */
	.review-cta {
		background: linear-gradient(135deg, var(--primary-color) 0%, var(--accent-color) 100%);
		border-radius: 16px;
		padding: 2.5rem;
		margin-top: 2rem;
		text-align: center;
		color: white;
		box-shadow: var(--shadow-medium);
	}

	.review-cta__content {
		display: flex;
		align-items: center;
		justify-content: space-between;
		gap: 2rem;
		max-width: 800px;
		margin: 0 auto;
	}

	.review-cta__text {
		flex: 1;
		text-align: left;
	}

	.review-cta__text h3 {
		font-size: 1.5rem;
		font-weight: 600;
		margin-bottom: 0.5rem;
		color: white;
	}

	.review-cta__text p {
		color: rgba(255, 255, 255, 0.9);
		font-size: 1rem;
		margin: 0;
	}

	.review-btn {
		background: white !important;
		color: var(--primary-color) !important;
		border: 2px solid white;
		padding: 0.875rem 2rem;
		font-weight: 600;
		white-space: nowrap;
		flex-shrink: 0;
		text-decoration: none;
		border-radius: 25px;
		display: flex;
		align-items: center;
		gap: 0.5rem;
		transition: all 0.3s ease;
	}

	.review-btn:hover {
		background: rgba(255, 255, 255, 0.1) !important;
		color: white !important;
		border-color: white;
		transform: translateY(-2px);
	}

	/* Fade-in animation for new testimonials */
	.testimonial-card.fade-in {
		opacity: 0;
		transform: translateY(20px);
		animation: fadeInUp 0.6s ease forwards;
	}

	@keyframes fadeInUp {
		to {
			opacity: 1;
			transform: translateY(0);
		}
	}

	@media (max-width: 768px) {
		.testimonials__grid {
			grid-template-columns: 1fr;
		}

		.review-cta__content {
			flex-direction: column;
			gap: 1.5rem;
			text-align: center;
		}

		.review-cta__text {
			text-align: center;
		}

		.testimonials__controls {
			margin: 2rem 0;
		}
	}
</style>